(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"ct+p":function(e,t,n){"use strict";n.r(t),n.d(t,"HomePageModule",function(){return L});var r=n("ofXK"),i=n("TEn/"),o=n("3Pt+"),s=n("tyNb");class c{constructor(e,t){this.fileName=t.trim(),this.rawSrt=e.trim().replace(/\r/g,"");const n=this.rawSrt.split("\n\n");this.srtEntries=n.map(e=>{const t=e.match(/(\d+)[^](\d+):(\d+):(\d+),(\d+) --> (\d+):(\d+):(\d+),(\d+)[^](.+)/);if(null==t)throw new Error(`Failed to parse: ${e}`);const n=parseInt(t[1],10),r=new a(parseInt(t[2],10),parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10)),i=new a(parseInt(t[6],10),parseInt(t[7],10),parseInt(t[8],10),parseInt(t[9],10));return new l(n,r,i,t[10])})}setTextFromAnotherHolder(e,t=0){const n=this.clone();for(let r=0,i=t;r<this.srtEntries.length&&i<e.srtEntries.length;r++,i++)n.srtEntries[r].text=e.srtEntries[i].text;return n}toString(){return this.srtEntries.reduce((e,t)=>e+`${t.toString()}\n\n`,"").trim()}getFileName(){return this.fileName}clone(){return new c(this.rawSrt,this.fileName)}getAmountOfEntries(){return this.srtEntries.length}}class l{constructor(e,t,n,r){this.id=e,this.start=t,this.end=n,this.text=r}toString(){return`${this.id}\n${this.start.toString()} --\x3e ${this.end.toString()}\n${this.text}`.trim()}}class a{constructor(e,t,n,r){this.hours=e,this.minutes=t,this.seconds=n,this.milliseconds=r}toString(){return`${this.normalize(this.hours)}:${this.normalize(this.minutes)}:${this.normalize(this.seconds)},${this.normalize(this.milliseconds,3)}`}normalize(e,t=2){let n=`${e}`;for(;n.length!==t;)n=`0${n}`;return n}}var b=n("fXoL");const u=["fileInputCorrectLanguage"],g=["fileInputCorrectTiming"],d=["correctLanguageTextArea"],h=["correctTimingTextArea"],m=[{path:"",component:(()=>{class e{constructor(){this.MissingFileName="Upload file...",this.synchronizeScrolling=!0,this.startFromIndex=0}uploadCorrectLanguage(){this.uploadFile(this.fileInputCorrectLanguage.nativeElement).then(e=>{this.correctLanguageSubtitles=e,this.correctLanguageTextArea.nativeElement.value=e.toString()})}uploadCorrectTiming(){this.uploadFile(this.fileInputCorrectTiming.nativeElement).then(e=>{this.correctTimingSubtitles=e,this.correctTimingTextArea.nativeElement.value=e.toString()})}uploadFile(e){return new Promise(t=>{const n=()=>{e.removeEventListener("change",n);const r=e.files[0];r.arrayBuffer().then(e=>{const n=new TextDecoder("windows-1251");t(new c(n.decode(e),r.name))})};e.addEventListener("change",n),e.click()})}getCorrectTimingFileName(){var e,t;return null!==(t=null===(e=this.correctTimingSubtitles)||void 0===e?void 0:e.getFileName())&&void 0!==t?t:this.MissingFileName}getCorrectLanguageFileName(){var e,t;return null!==(t=null===(e=this.correctLanguageSubtitles)||void 0===e?void 0:e.getFileName())&&void 0!==t?t:this.MissingFileName}shouldDisableActionButton(){return null==this.correctTimingSubtitles||null==this.correctLanguageSubtitles}startTransformation(){const e=this.startFromIndex<=0||this.startFromIndex>=this.correctLanguageSubtitles.getAmountOfEntries()?0:this.startFromIndex-1,t=this.correctTimingSubtitles.setTextFromAnotherHolder(this.correctLanguageSubtitles,e).toString();this.downloadSrtFile(t,`Fixed-${this.getCorrectLanguageFileName()}`)}downloadSrtFile(e,t){const n=new Blob([e],{type:"text/plain"}),r=document.createElement("a"),i=URL.createObjectURL(n);r.href=i,r.download=t,document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),window.URL.revokeObjectURL(i)},0)}onCorrectLanguageTextAreaScrolled(){this.synchronizeScrolling&&this.correctTimingTextArea.nativeElement.scrollTo({top:this.correctLanguageTextArea.nativeElement.scrollTop,behavior:"auto"})}onCorrectTimingTextAreaScrolled(){this.synchronizeScrolling&&this.correctLanguageTextArea.nativeElement.scrollTo({top:this.correctTimingTextArea.nativeElement.scrollTop,behavior:"auto"})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Db({type:e,selectors:[["app-home"]],viewQuery:function(e,t){if(1&e&&(b.dc(u,1),b.dc(g,1),b.dc(d,1),b.dc(h,1)),2&e){let e;b.Yb(e=b.Ub())&&(t.fileInputCorrectLanguage=e.first),b.Yb(e=b.Ub())&&(t.fileInputCorrectTiming=e.first),b.Yb(e=b.Ub())&&(t.correctLanguageTextArea=e.first),b.Yb(e=b.Ub())&&(t.correctTimingTextArea=e.first)}},decls:51,vars:8,consts:[["size","8","offset","2"],["slot","end",3,"click"],["slot","icon-only","name","cloud-upload-outline"],["size","4","offset","2"],["readonly","",3,"rows","scroll"],["correctLanguageTextArea",""],["size","4"],["correctTimingTextArea",""],["slot","end",3,"ngModel","ngModelChange"],["inputmode","numeric","type","number","placeholder","Entry Number...",3,"ngModel","min","ngModelChange"],["size","8","offset","2",1,"ion-text-center"],[3,"disabled","click"],["accept",".srt","type","file",2,"display","none"],["fileInputCorrectLanguage",""],["fileInputCorrectTiming",""]],template:function(e,t){1&e&&(b.Mb(0,"ion-header"),b.Mb(1,"ion-toolbar"),b.Mb(2,"ion-title"),b.bc(3,"Replace Subtitles"),b.Lb(),b.Lb(),b.Lb(),b.Mb(4,"ion-content"),b.Mb(5,"ion-grid"),b.Mb(6,"ion-row"),b.Mb(7,"ion-col",0),b.Mb(8,"ion-item"),b.Mb(9,"ion-label"),b.bc(10,"Correct Timing"),b.Lb(),b.Mb(11,"ion-label"),b.bc(12),b.Lb(),b.Mb(13,"ion-button",1),b.Tb("click",function(){return t.uploadCorrectTiming()}),b.Kb(14,"ion-icon",2),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(15,"ion-row"),b.Mb(16,"ion-col",0),b.Mb(17,"ion-item"),b.Mb(18,"ion-label"),b.bc(19,"Correct Language"),b.Lb(),b.Mb(20,"ion-label"),b.bc(21),b.Lb(),b.Mb(22,"ion-button",1),b.Tb("click",function(){return t.uploadCorrectLanguage()}),b.Kb(23,"ion-icon",2),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(24,"ion-row"),b.Mb(25,"ion-col",3),b.Mb(26,"textarea",4,5),b.Tb("scroll",function(){return t.onCorrectLanguageTextAreaScrolled()}),b.Lb(),b.Lb(),b.Mb(28,"ion-col",6),b.Mb(29,"textarea",4,7),b.Tb("scroll",function(){return t.onCorrectTimingTextAreaScrolled()}),b.Lb(),b.Lb(),b.Lb(),b.Mb(31,"ion-row"),b.Mb(32,"ion-col",0),b.Mb(33,"ion-item"),b.Mb(34,"ion-label"),b.bc(35,"Synchronize Scrolling"),b.Lb(),b.Mb(36,"ion-checkbox",8),b.Tb("ngModelChange",function(e){return t.synchronizeScrolling=e}),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(37,"ion-row"),b.Mb(38,"ion-col",0),b.Mb(39,"ion-item"),b.Mb(40,"ion-label"),b.bc(41,"Start From"),b.Lb(),b.Mb(42,"ion-input",9),b.Tb("ngModelChange",function(e){return t.startFromIndex=e}),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(43,"ion-row"),b.Mb(44,"ion-col",10),b.Mb(45,"ion-button",11),b.Tb("click",function(){return t.startTransformation()}),b.bc(46,"Start"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Kb(47,"input",12,13),b.Kb(49,"input",12,14)),2&e&&(b.zb(12),b.cc(t.getCorrectTimingFileName()),b.zb(9),b.cc(t.getCorrectLanguageFileName()),b.zb(5),b.Xb("rows",20),b.zb(3),b.Xb("rows",20),b.zb(7),b.Xb("ngModel",t.synchronizeScrolling),b.zb(6),b.Xb("ngModel",t.startFromIndex)("min",0),b.zb(3),b.Xb("disabled",t.shouldDisableActionButton()))},directives:[i.h,i.p,i.o,i.f,i.g,i.n,i.e,i.k,i.l,i.c,i.i,i.d,i.a,o.d,o.e,i.j,i.s],styles:["textarea[_ngcontent-%COMP%]{border-radius:8px;width:100%;border:2px solid var(--ion-color-medium);box-shadow:0 0 20px 0 var(--ion-color-light);resize:none}"]}),e})()}];let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({imports:[[s.i.forChild(m)],s.i]}),e})(),L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.Hb({type:e}),e.\u0275inj=b.Gb({imports:[[r.b,o.a,i.q,p]]}),e})()}}]);